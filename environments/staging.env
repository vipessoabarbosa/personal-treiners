# ==============================================
# FITCOACH PRO - STAGING ENVIRONMENT
# ==============================================

# Application
APP_NAME="FitCoach Pro (Staging)"
APP_VERSION=1.0.0
ENVIRONMENT=staging
DEBUG=false
LOG_LEVEL=info

# Server Configuration
PORT=3001
HOST=0.0.0.0
CORS_ORIGIN=https://fitcoach-staging.vercel.app,https://fitcoach-staging.railway.app
TRUST_PROXY=true

# Database (PostgreSQL - Railway/Staging)
DATABASE_URL=${DATABASE_URL}
DB_SSL=true
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_TIMEOUT=30000
DB_STATEMENT_TIMEOUT=60000
DB_IDLE_TIMEOUT=300000

# Cache (Redis - Railway/Staging)
REDIS_URL=${REDIS_URL}
REDIS_TTL=3600
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# Authentication & Security
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d
ENCRYPTION_KEY=${ENCRYPTION_KEY}
BCRYPT_ROUNDS=12
SESSION_SECRET=${SESSION_SECRET}

# Rate Limiting (More restrictive)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=60
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# Email (SendGrid/Production-like)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_FROM_NAME="FitCoach Pro Staging"
SMTP_FROM_EMAIL=staging@fitcoach.pro

# File Storage (AWS S3 - Staging Bucket)
STORAGE_TYPE=s3
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=us-east-1
AWS_S3_BUCKET=fitcoach-staging-uploads
AWS_S3_ACL=private
AWS_S3_SIGNED_URL_EXPIRES=3600

# Cloudinary (Staging)
CLOUDINARY_CLOUD_NAME=${CLOUDINARY_CLOUD_NAME}
CLOUDINARY_API_KEY=${CLOUDINARY_API_KEY}
CLOUDINARY_API_SECRET=${CLOUDINARY_API_SECRET}
CLOUDINARY_FOLDER=staging

# Upload Limits
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/webp,application/pdf

# External APIs (Staging/Test Keys)
GOOGLE_MAPS_API_KEY=${GOOGLE_MAPS_API_KEY}
GOOGLE_OAUTH_CLIENT_ID=${GOOGLE_OAUTH_CLIENT_ID}
GOOGLE_OAUTH_CLIENT_SECRET=${GOOGLE_OAUTH_CLIENT_SECRET}
FACEBOOK_APP_ID=${FACEBOOK_APP_ID}
FACEBOOK_APP_SECRET=${FACEBOOK_APP_SECRET}
APPLE_TEAM_ID=${APPLE_TEAM_ID}
APPLE_KEY_ID=${APPLE_KEY_ID}
APPLE_PRIVATE_KEY=${APPLE_PRIVATE_KEY}

# Push Notifications (Staging)
FCM_SERVER_KEY=${FCM_SERVER_KEY}
APNS_KEY_ID=${APNS_KEY_ID}
APNS_TEAM_ID=${APNS_TEAM_ID}
APNS_PRIVATE_KEY=${APNS_PRIVATE_KEY}
APNS_BUNDLE_ID=com.fitcoach.pro.staging
APNS_ENVIRONMENT=sandbox

# Monitoring & Analytics (Staging)
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.1
POSTHOG_API_KEY=${POSTHOG_API_KEY}
POSTHOG_HOST=https://app.posthog.com
GOOGLE_ANALYTICS_ID=${GOOGLE_ANALYTICS_ID}

# Logging (Structured)
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/tmp/app.log
LOG_MAX_SIZE=50m
LOG_MAX_FILES=10
LOG_COMPRESS=true

# Production-like settings
HOT_RELOAD=false
WATCH_FILES=false
SOURCE_MAPS=false
PRETTY_ERRORS=false

# Testing (Staging has its own test DB)
TEST_DATABASE_URL=${TEST_DATABASE_URL}
TEST_REDIS_URL=${TEST_REDIS_URL}
TEST_TIMEOUT=60000

# Frontend URLs
FRONTEND_URL=https://fitcoach-staging.vercel.app
MOBILE_DEEP_LINK_SCHEME=fitcoach-staging

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Feature Flags (Staging mirrors production)
FEATURE_REGISTRATION=true
FEATURE_SOCIAL_LOGIN=true
FEATURE_PUSH_NOTIFICATIONS=true
FEATURE_ANALYTICS=true
FEATURE_PREMIUM_FEATURES=true

# API Limits & Quotas (Production-like)
API_RATE_LIMIT=500
FILE_UPLOAD_LIMIT=20
DAILY_EMAIL_LIMIT=500
MAX_CLIENTS_PER_TRAINER=50
MAX_WORKOUTS_PER_CLIENT=30

# Webhooks (Staging)
WEBHOOK_SECRET=${WEBHOOK_SECRET}
WEBHOOK_TIMEOUT=10000
WEBHOOK_RETRY_ATTEMPTS=3

# Cron Jobs (Enabled but less frequent)
CRON_ENABLED=true
CRON_BACKUP_SCHEDULE="0 3 * * *"
CRON_CLEANUP_SCHEDULE="0 4 * * *"
CRON_REPORTS_SCHEDULE="0 9 * * 1"

# Backup & Recovery (S3)
BACKUP_ENABLED=true
BACKUP_TYPE=s3
BACKUP_S3_BUCKET=fitcoach-staging-backups
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=true

# Performance (Optimized)
CACHE_ENABLED=true
CACHE_TTL=1800
COMPRESSION_ENABLED=true
STATIC_CACHE_MAX_AGE=86400
API_CACHE_TTL=300

# Security Headers
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
CSP_REPORT_URI=/api/csp-report

# SSL/TLS
SSL_REDIRECT=true
SSL_TRUST_PROXY=true

# Database Migrations
RUN_MIGRATIONS=true
MIGRATION_TIMEOUT=300000

# Metrics & Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Third-party Integrations
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_ENVIRONMENT=test

# Notification Settings
NOTIFICATION_QUEUE_ENABLED=true
NOTIFICATION_RETRY_ATTEMPTS=3
NOTIFICATION_RETRY_DELAY=5000

# API Documentation
SWAGGER_ENABLED=true
SWAGGER_PATH=/api-docs
API_VERSION=v1

# Content Security
CONTENT_MODERATION_ENABLED=true
IMAGE_OPTIMIZATION_ENABLED=true
IMAGE_MAX_WIDTH=2048
IMAGE_MAX_HEIGHT=2048
IMAGE_QUALITY=85